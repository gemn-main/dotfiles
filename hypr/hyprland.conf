#####################################################################################
# HYPRLAND CONFIG
#####################################################################################
# Автогенерируемая строка
#autogenerated = 1

################
### MONITORS ###
################
monitor=,preference,auto,1.5 # Масштабирование для 4K экранов

###################
### MY PROGRAMS ###
###################
$terminal = kitty
$fileManager = dolphin
$menu = rofi -show run

#################
### AUTOSTART ###
#################
exec-once = hyprpaper &
exec-once = hyprlock &
exec-once = systemctl --user start mpvpaper.service
exec-once = waybar # Запуск Waybar
exec-once = [workspace 10 silent] corectrl
exec-once = fcitx5 -d

#############################
### ENVIRONMENT VARIABLES ###
#############################
env = XCURSOR_SIZE,24 # Размер курсора
env = HYPRCURSOR_SIZE,24 # Размер курсора Hyprland

#####################
### LOOK AND FEEL ###
#####################
general {
    gaps_in = 5
    gaps_out = 20
    border_size = 0
    col.active_border = rgba(33ccffee)
    col.inactive_border = rgba(595959aa)
    resize_on_border = true
    layout = dwindle
}

#windowrule = noborder 1, floating 1
decoration {
    rounding = 10 # Закругление углов
    active_opacity = 0.95 # Прозрачность активного окна
    inactive_opacity = 0.75 # Прозрачность неактивного
    
    shadow {
        enabled = true # Включение теней
        range = 10 # Интенсивность тени
        color = rgba(212121ee) # Цвет тени
    }

    blur {
        enabled = true # Включение размытия
        size = 6 # Радиус размытия
        passes = 2# Количество проходов
    }
}

animations {
    enabled = yes # Включение анимаций
    bezier = easeOutQuint,0.23,1,0.32,1 # Кривая анимации
    
    animation = windows, 1, 3, easeOutQuint, popin 90% # Анимация окон
    animation = fade, 1, 3, default # Анимация затухания
}

###################
### INPUT RULES ###
###################
input {
    kb_layout = us,ru # Раскладки клавиатуры
    kb_options = grp:win_space_toggle # Переключение по Win+Space
    follow_mouse = 1 # Фокус следует за курсором
    sensitivity = 0 # Чувствительность мыши
}

#########################
### WINDOW BEHAVIORS ###
#########################
# Все окна плавающие по умолчанию
windowrule = float 1 = class:.*


# Исключения (терминалы остаются тайлинговыми)
#windowrule = tile 1 =  class:kitty
#windowrulev2 = tile, class:Alacritty
#windowrulev2 = tile, class:foot
windowrule = size 1000 600 = class:^(kitty)$
windowrule = center 1 = class:^(kitty)$

# Диалоговые окна
windowrule = float 1 = class:zenity
windowrule = float 1 = class:pavucontrol
windowrule = float 1 = class:blueman-manager
windowrule = float 1 = class:nm-connection-editor

# Фиксированный размер и позиция
windowrule = size 1600 1000 = class:pavucontrol
windowrule = center 1 = class:pavucontrol

###################
### KEYBINDINGS ###
###################
$mainMod = SUPER # Основная windowrulev2 = noborder, floating:1 
# Основные команды

#bind = SUPER+L, exec, ~/.config/swaylock/lock.sh


bindm = $mainMod, mouse:272, movewindow  # ЛКМ - перемещение
bindm = $mainMod, mouse:273, resizewindow  # ПКМ - изменение размера
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, D, exec, $menu
bind = $mainMod, Q, killactive
bind = $mainMod, S, exec, rofi -show drun
# Управление окнами
bind = $mainMod, F, togglefloating
bind = $mainMod SHIFT, F, fullscreen
bind = SUPER, L, exec, hyprlock
# Рабочие пространства
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Перемещение окон
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Скриншоты (ваши оригинальные)
bind = CTRL ALT, E, exec, grim ~/skrin/full_$(date +'%Y-%m-%d_%H-%M-%S').png && notify-send "Скриншот" "Весь экран сохранён в ~/skrin/"
bind = CTRL ALT, W, exec, grim -g "$(slurp)" ~/skrin/area_$(date +'%Y-%m-%d_%H-%M-%S').png && notify-send "Скриншот" "Выделенная область сохранена в ~/skrin/"
bind = CTRL ALT, Q, exec, grim -g "$(slurp)" - | wl-copy && notify-send "Скриншот" "Изображение скопировано в буфер обмена"

# Мультимедиа клавиши
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# Управление медиа
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous